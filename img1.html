<html>
	<head>
		<script type="text/javascript">
			function brillo(){
				var img = new Image();
				var imgurl = '';
				imgurl = document.getElementById('urltxt').value;
				img.src = imgurl;
				var ctebrillo = document.getElementById('brillotxt').value;
				alert(ctebrillo);
				var canvas = document.getElementById('canvas');
				canvas.height = img.height;
				canvas.width = img.width;
				var ctx = canvas.getContext('2d');
				ctx.drawImage(img, 0, 0);
				var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
				var data = imageData.data;
				var cte=parseInt(ctebrillo);
				for (var i = 0; i < data.length; i += 4) {
					data[i] = data[i]+cte; // red
					data[i + 1] = data[i + 1]+cte; // green
					data[i + 2] = data[i + 2]+cte; // blue
				}
				ctx.putImageData(imageData, 0, 0);
			}
			
			function rojo(){
				filtraColor(1,0,0);
			}
			
			function verde(){
				filtraColor(0,1,0);
			}
			function azul(){
				filtraColor(0,0,1);
			}
			
			function filtraColor(r,g,b){
				var img = new Image();
				var imgurl = '';
				imgurl = document.getElementById('urltxt').value;
				img.src = imgurl;
				var ctebrillo = document.getElementById('brillotxt').value;
				alert(ctebrillo);
				var canvas = document.getElementById('canvas');
				canvas.height = img.height;
				canvas.width = img.width;
				var ctx = canvas.getContext('2d');
				ctx.drawImage(img, 0, 0);
				var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
				var data = imageData.data;
				for (var i = 0; i < data.length; i += 4) {
					if(r == 1){
						data[i] = data[i]; // red
					}else{
						data[i] = 0;
					}
					if(g==1){
						data[i + 1] = data[i + 1]; // green
					}else{
						data[i+1] = 0;
					}
					if(b==1){
						data[i + 2] = data[i + 2]; // blue
					}else{
						data[i+2] = 0;
					}
				}
				ctx.putImageData(imageData, 0, 0);
			}
		</script>
	</head>
	<body>
		<div>
			Url
			<input type="text" id="urltxt" name="urltxt" size=60><br>
			Brillo: <input type="text" id="brillotxt" name="brillotxt" size=4>
			<input id="testbtn" value="" type="button" onclick="brillo();"/>
			<input id="testbtn" value="Rojo" type="button" onclick="rojo();"/>
			<input id="testbtn" value="Verde" type="button" onclick="verde();"/>
			<input id="testbtn" value="Azul" type="button" onclick="azul();"/>
		</div>
		<canvas id="canvas"></canvas>
	</body>
</html>

